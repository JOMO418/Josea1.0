# ============================================
# PRAM AUTO SPARES - ENVIRONMENT VARIABLES
# Copy this file to .env and fill in your values
# ============================================

# ============================================
# DATABASE
# ============================================
# Production: Use Railway/Render provided DATABASE_URL
# Local: postgresql://user:password@localhost:5432/database_name
DATABASE_URL="postgresql://user:password@localhost:5432/pram-auto-spares?schema=public"

# ============================================
# JWT AUTHENTICATION
# ============================================
# IMPORTANT: Generate a new 64-character secret for production
# Run: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET="your-very-long-random-secret-minimum-32-characters-here"
JWT_EXPIRES_IN="24h"

# ============================================
# SERVER
# ============================================
PORT=5000
NODE_ENV=production

# ============================================
# CORS (Frontend URL)
# ============================================
# IMPORTANT: Multiple origins must be comma-separated
# Development: http://localhost:3001,http://localhost:5173
# Production: https://josea1-0.vercel.app
# Both: https://josea1-0.vercel.app,http://localhost:3001,http://localhost:5173
ALLOWED_ORIGINS="https://josea1-0.vercel.app"

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# CACHE TTL (seconds)
# ============================================
CACHE_TTL_DASHBOARD=60
CACHE_TTL_INVENTORY=30

# ============================================
# M-PESA DARAJA API
# ============================================
# Get credentials from: https://developer.safaricom.co.ke
# SANDBOX for testing, PRODUCTION for live
MPESA_CONSUMER_KEY="your_mpesa_consumer_key"
MPESA_CONSUMER_SECRET="your_mpesa_consumer_secret"
MPESA_PASSKEY="your_mpesa_passkey"
MPESA_BUSINESS_SHORT_CODE="174379"
MPESA_ENVIRONMENT="sandbox"
# Callback URL: Update this to your deployed backend URL
MPESA_CALLBACK_URL="https://your-api.railway.app/api/payment/callback"

# ============================================
# GEMINI AI (Google AI Studio)
# ============================================
# Get API key from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY="your_gemini_api_key"
GEMINI_MODEL="gemini-2.5-flash"
GEMINI_MAX_TOKENS=8000

# ============================================
# JOSEA AI - RATE LIMITING
# ============================================
AI_RATE_LIMIT_MANAGER=25
AI_RATE_LIMIT_ADMIN=40

# ============================================
# CONVERSATION ENCRYPTION
# ============================================
# CRITICAL: Generate a new 32-character key for production
# Run: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Keep this secret and backed up - losing it means losing encrypted conversations
CONVERSATION_ENCRYPTION_KEY="your-32-char-hex-encryption-key-here"

# ============================================
# REDIS (Optional - for distributed caching)
# ============================================
# Leave commented for in-memory cache fallback
# REDIS_URL="redis://localhost:6379"
